<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xican.net | Portal Ultra VIP</title>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --orange: #ff6600;
            --orange-glow: rgba(255, 102, 0, 0.4);
            --bg-dark: #050505;
        }

        * { 
            font-family: 'Outfit', sans-serif; 
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% 50%, #151515 0%, #050505 100%);
            color: #fff;
            margin: 0;
            height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* Tarjeta VIP con borde infinito */
        .ultra-card {
            background: rgba(10, 10, 10, 0.95);
            position: relative;
            padding: 1px;
            border-radius: 2.5rem;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .ultra-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, var(--orange), transparent 40%);
            animation: rotate 6s linear infinite;
            z-index: 0;
        }

        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        .card-inner {
            position: relative;
            z-index: 1;
            background: linear-gradient(135deg, #0d0d0d 0%, #080808 100%);
            border-radius: calc(2.5rem - 1px);
            width: 100%;
            backdrop-filter: blur(20px);
        }

        /* Botón VIP Optimizado */
        .vip-button {
            background: linear-gradient(135deg, #ff4d00 0%, #ff7b00 100%);
            color: #fff;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 20px -5px rgba(255, 77, 0, 0.4);
        }

        .vip-button:active {
            transform: scale(0.96);
            filter: brightness(1.2);
        }

        .vip-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: sweep 3s infinite;
        }

        @keyframes sweep {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        /* Input Premium */
        .premium-field {
            background: rgba(255, 255, 255, 0.03) !important;
            border: 1px solid rgba(255, 102, 0, 0.1) !important;
            transition: all 0.3s ease;
            color: #ff9d00 !important;
        }

        .premium-field:focus {
            background: rgba(255, 102, 0, 0.05) !important;
            border-color: var(--orange) !important;
            box-shadow: 0 0 15px rgba(255, 102, 0, 0.15);
        }

        .hidden { display: none; }
        
        /* Animaciones de entrada */
        .reveal {
            animation: revealEffect 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes revealEffect {
            from { opacity: 0; transform: scale(0.95) translateY(20px); filter: blur(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
        }

        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
    </style>
</head>
<body>

    <div id="app" class="w-full max-w-[400px] px-6">
        
        <!-- PANTALLA 1: INICIO -->
        <section id="screen-start" class="ultra-card reveal">
            <div class="card-inner p-12 flex flex-col items-center text-center">
                <div class="mb-10 relative">
                    <div class="absolute inset-0 bg-orange-500 blur-3xl opacity-20"></div>
                    <div class="w-24 h-24 border-2 border-orange-500/50 rounded-full flex items-center justify-center relative z-10 bg-black/40 backdrop-blur-md">
                        <svg class="w-12 h-12 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                    </div>
                </div>
                <h1 class="text-4xl font-black italic tracking-tighter mb-2">XICAN<span class="text-orange-500">.NET</span></h1>
                <p class="text-[10px] text-gray-500 uppercase tracking-[0.5em] mb-12 font-bold">Portal de Acceso Restringido</p>
                <button onclick="nav('login')" class="w-full py-5 vip-button rounded-2xl text-sm italic">Inicializar Acceso</button>
            </div>
        </section>

        <!-- PANTALLA 2: LOGIN -->
        <section id="screen-login" class="hidden ultra-card reveal">
            <div class="card-inner p-10">
                <div class="flex justify-between items-center mb-10">
                    <h2 class="text-xs font-black text-orange-500 uppercase tracking-widest italic">XICAN.NET ID</h2>
                    <div class="w-2 h-2 rounded-full bg-orange-500 animate-pulse"></div>
                </div>
                <form onsubmit="handleLogin(event)" class="space-y-6">
                    <div class="space-y-2">
                        <label class="text-[9px] text-gray-500 uppercase tracking-widest ml-1">ID de Operador</label>
                        <input type="text" id="user" required class="w-full px-5 py-4 premium-field rounded-xl outline-none text-sm font-bold">
                    </div>
                    <div class="space-y-2">
                        <label class="text-[9px] text-gray-500 uppercase tracking-widest ml-1">Clave Cifrada</label>
                        <input type="password" id="pass" required class="w-full px-5 py-4 premium-field rounded-xl outline-none text-sm">
                    </div>
                    <p id="login-err" class="hidden text-red-500 text-[9px] font-bold uppercase text-center italic">Acceso denegado a xican.net</p>
                    <div class="pt-4 flex flex-col gap-4">
                        <button type="submit" class="w-full py-5 vip-button rounded-xl text-sm">Validar</button>
                        <button type="button" onclick="nav('register')" class="text-gray-600 text-[10px] font-bold uppercase tracking-widest py-2">Nuevo Registro</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- PANTALLA CARGA -->
        <section id="screen-load" class="hidden ultra-card reveal">
            <div class="card-inner p-16 flex flex-col items-center text-center">
                <div class="w-20 h-[2px] bg-orange-500/20 mb-12 relative overflow-hidden">
                    <div class="absolute inset-0 bg-orange-500 animate-[loading_1.5s_infinite]"></div>
                </div>
                <h3 class="text-lg font-black text-white italic uppercase mb-2">Verificando</h3>
                <p class="text-[9px] text-gray-500 tracking-[0.4em] uppercase">Xican.net Network</p>
            </div>
        </section>

        <!-- PANTALLA 3: REGISTRO -->
        <section id="screen-register" class="hidden ultra-card reveal">
            <div class="card-inner p-10">
                <h2 class="text-lg font-black text-orange-500 italic mb-8 uppercase text-center">Registro Xican</h2>
                <form onsubmit="handleRegister(event)" class="space-y-4">
                    <input type="text" id="reg-u" required placeholder="NUEVO ID" class="w-full px-5 py-4 premium-field rounded-xl outline-none text-xs font-bold uppercase tracking-widest">
                    <input type="password" id="reg-p" required placeholder="CONTRASEÑA" class="w-full px-5 py-4 premium-field rounded-xl outline-none text-xs">
                    <input type="password" id="reg-c" required placeholder="CONFIRMAR" class="w-full px-5 py-4 premium-field rounded-xl outline-none text-xs">
                    <p id="reg-err" class="hidden text-red-500 text-[9px] font-bold uppercase text-center italic"></p>
                    <button type="submit" class="w-full py-5 vip-button rounded-xl text-sm mt-4">Confirmar Enlace</button>
                    <button type="button" onclick="nav('login')" class="w-full py-2 text-gray-600 text-[9px] font-bold uppercase tracking-widest">Volver</button>
                </form>
            </div>
        </section>

        <!-- PANTALLA 4: ÉXITO -->
        <section id="screen-success" class="hidden ultra-card reveal">
            <div class="card-inner p-12 flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(255,102,0,0.4)]">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg>
                </div>
                <h2 class="text-lg font-black text-white italic mb-1 uppercase tracking-tighter leading-tight">
                    Felicidades ya hemos confirmado tu usuario
                </h2>
                <div class="bg-black/60 px-8 py-3 rounded-full border border-orange-500/20 mb-10 mt-4">
                    <span id="target-user" class="text-orange-500 font-bold tracking-[0.2em] text-sm">---</span>
                </div>

                <button onclick="redirect()" class="w-full py-5 vip-button rounded-2xl text-xs font-black italic">Proseguir</button>
            </div>
        </section>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        let db, auth, isCloud = false;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'xican-net-vip';

        // Usuarios estáticos
        const staticUsers = { "referente": "1234", "Altamente.13": "1234", "Xican.net": "123", "Bladimir": "1234" };

        const init = async () => {
            try {
                if (typeof __firebase_config !== 'undefined') {
                    const cfg = JSON.parse(__firebase_config);
                    const app = initializeApp(cfg);
                    auth = getAuth(app);
                    db = getFirestore(app);
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                    onAuthStateChanged(auth, u => { if(u) isCloud = true; });
                }
            } catch (e) { console.log("Modo offline."); }
        };
        init();

        window.nav = (id) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(`screen-${id}`).classList.remove('hidden');
        };

        const triggerAccess = (u) => {
            nav('load');
            setTimeout(() => {
                document.getElementById('target-user').textContent = u.toUpperCase();
                nav('success');
            }, 1800);
        };

        window.handleLogin = async (e) => {
            e.preventDefault();
            const u = document.getElementById('user').value.trim();
            const p = document.getElementById('pass').value.trim();
            const err = document.getElementById('login-err');

            if (staticUsers[u] === p) return triggerAccess(u);

            if (isCloud) {
                const d = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'users', u));
                if (d.exists() && d.data().pass === p) return triggerAccess(u);
            }
            
            err.classList.remove('hidden');
            setTimeout(() => err.classList.add('hidden'), 3000);
        };

        window.handleRegister = async (e) => {
            e.preventDefault();
            const u = document.getElementById('reg-u').value.trim();
            const p = document.getElementById('reg-p').value.trim();
            const c = document.getElementById('reg-c').value.trim();
            const err = document.getElementById('reg-err');

            if (p !== c) { err.textContent = "Error de paridad"; err.classList.remove('hidden'); return; }
            if (!isCloud) { err.textContent = "Nube no disponible"; err.classList.remove('hidden'); return; }

            try {
                const ref = doc(db, 'artifacts', appId, 'public', 'data', 'users', u);
                if ((await getDoc(ref)).exists()) { err.textContent = "ID en uso"; err.classList.remove('hidden'); return; }
                await setDoc(ref, { user: u, pass: p, ts: new Date().toISOString() });
                triggerAccess(u);
            } catch (ex) { err.textContent = "Fallo de red"; err.classList.remove('hidden'); }
        };

        window.redirect = () => window.location.href = "https://beacons.ai/xican_41462008";
    </script>
</body>
</html>
